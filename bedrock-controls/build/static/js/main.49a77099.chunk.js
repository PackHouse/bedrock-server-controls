(this["webpackJsonpbedrock-controls"]=this["webpackJsonpbedrock-controls"]||[]).push([[0],{47:function(e,t,a){e.exports=a(83)},52:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),s=a.n(o),l=(a(52),a(2)),i=a(3),c=a(5),u=a(4),d=a(12),m=a(6),p=a(13),h=a(16),v=a(44),E=a(20),f=a(57),b={isAuthenticated:!1,user:{},loading:!1},g={},w=Object(h.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(E.a)(Object(E.a)({},e),{},{isAuthenticated:!f(t.payload),user:t.payload});case"USER_LOADING":return Object(E.a)(Object(E.a)({},e),{},{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}}}),y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.d,k=Object(h.e)(w,{},y(Object(h.a)(v.a))),O=a(24),j=a.n(O),C=a(14),N=a.n(C),S=function(e){e?N.a.defaults.headers.common.Authorization=e:delete N.a.defaults.headers.common.Authorization},U=function(e){return{type:"SET_CURRENT_USER",payload:e}},R=function(){return function(e){localStorage.removeItem("jwtToken"),S(!1),e(U({}))}},D=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"appDiv"},r.a.createElement("h1",{className:"headerStyle"},"Bedrock Server Controls"),r.a.createElement("div",{className:"landing"},r.a.createElement(d.b,{className:"link",to:"/login"},"Login"),r.a.createElement(d.b,{className:"link",to:"/register"},"Register")))}}]),a}(r.a.Component),P=a(18),x=a(15),L=a.n(x),T=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(P.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={username:e.state.username,email:e.state.email,server:e.state.server,password:e.state.password,password2:e.state.password2};e.props.registerUser(a,e.props.history)},e.state={username:"",email:"",server:"",password:"",password2:"",errors:{}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"appDiv"},r.a.createElement("h1",{className:"headerStyle"},"Bedrock Server Controls"),r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Register New User"),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("span",{className:"red-text"},e.username),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{className:L()("",{invalid:e.username}),onChange:this.onChange,value:this.state.username,placeholder:"Username",error:e.username,id:"username",type:"text"})),r.a.createElement("span",{className:"red-text"},e.email),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{className:L()("",{invalid:e.email}),onChange:this.onChange,value:this.state.email,placeholder:"Email",error:e.email,id:"email",type:"email"})),r.a.createElement("span",{className:"red-text"},e.server),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{className:L()("",{invalid:e.server}),onChange:this.onChange,value:this.state.server,placeholder:"Server Name",error:e.server,id:"server",type:"text"})),r.a.createElement("span",{className:"red-text"},e.password),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{className:L()("",{invalid:e.password}),onChange:this.onChange,value:this.state.password,placeholder:"Password",error:e.password,id:"password",type:"password"})),r.a.createElement("span",{className:"red-text"},e.password2),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{className:L()("",{invalid:e.password2}),onChange:this.onChange,value:this.state.password2,placeholder:"Confirm Password",error:e.password2,id:"password2",type:"password"})),r.a.createElement("p",null,"Already have an account? ",r.a.createElement(d.b,{className:"otherLink",to:"/login"},"Login")),r.a.createElement("input",{type:"submit",value:"Register"}))))}}]),a}(r.a.Component),A=Object(p.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){N.a.post("/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:"GET_ERRORS",payload:e.response.data})}))}}})(Object(m.g)(T)),_=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(P.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={username:e.state.username,password:e.state.password};e.props.loginUser(a)},e.state={username:"",password:"",errors:{}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"appDiv"},r.a.createElement("h1",{className:"headerStyle"},"Bedrock Server Controls"),r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Server Login"),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("span",{className:"red-text"},e.username,e.usernamenotfound),r.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{onChange:this.onChange,value:this.state.username,error:e.username,id:"username",type:"text",placeholder:"Username",className:L()("",{invalid:e.username||e.usernamenotfound})})),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",placeholder:"Password",className:L()("",{invalid:e.password||e.passwordincorrect})})),r.a.createElement("p",null,"Don't have an account? ",r.a.createElement(d.b,{className:"otherLink",to:"/register"},"Register")),r.a.createElement("input",{type:"submit",value:"Login"}))))}}]),a}(r.a.Component),W=Object(p.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){N.a.post("/api/users/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),S(a);var n=j()(a);t(U(n))})).catch((function(e){return t({type:"GET_ERRORS",payload:e.response.data})}))}}})(_),B=a(46),I=Object(p.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(B.a)(e,["component","auth"]);return r.a.createElement(m.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(m.a,{to:"/login"})}}))})),M=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"headerCard"},r.a.createElement("h1",null,this.props.name))}}]),a}(r.a.Component),G=a(23),V=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleClick=function(e){e.preventDefault();var t={};!0===n.state.online?t={id:n.props.id,online:!1}:!1===n.state.online&&(t={id:n.props.id,online:!0}),N.a.post("/api/servers/online",t).catch((function(e){return n.setState({error:e.response.data.error})}))},n.state={online:n.props.online,id:n.props.id,success:null},n.handleClick=n.handleClick.bind(Object(G.a)(n)),n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){this.props.online!==e.online&&this.setState({online:this.props.online})}},{key:"render",value:function(){return this.props.online?r.a.createElement("div",null,r.a.createElement("button",{className:"stopButton",onClick:this.handleClick},r.a.createElement("h3",null,"Stop"))):r.a.createElement("div",null,r.a.createElement("button",{className:"startButton",onClick:this.handleClick},r.a.createElement("h3",null,"Start")))}}]),a}(r.a.Component),z=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e={color:"red"},t="Offline";return this.props.online&&(e={color:"green"},t="Online"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Status")),r.a.createElement("code",{style:e},t),r.a.createElement("br",null),r.a.createElement("code",null,"Update interval: 5.0s"),r.a.createElement(V,{id:this.props.id,online:this.props.online}))}}]),a}(r.a.Component),J=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Address"),r.a.createElement("code",null,this.props.address),r.a.createElement("h2",null,"Port"),r.a.createElement("code",null,this.props.port))}}]),a}(r.a.Component),X=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Players"),r.a.createElement("code",null,this.props.onlinePlayers,"/",this.props.maxPlayers," Online"))}}]),a}(r.a.Component),q=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Software"),r.a.createElement("code",null,this.props.software),r.a.createElement("h2",null,"Version"),r.a.createElement("code",null,this.props.version))}}]),a}(r.a.Component),H=a(45),$=a.n(H),F=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Share this app")),r.a.createElement("div",null,r.a.createElement($.a,{id:"qr-code",value:this.props.baseURL,size:120,level:"H",includeMargin:!0})))}}]),a}(r.a.Component),K=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).onLogoutClick=function(t){t.preventDefault(),e.props.logoutUser()},e.onProfileClick=function(e){e.preventDefault()},e.state={name:"Unknown",online:null,address:"Unknown",port:"Unknown",onlinePlayers:"Unknown",maxPlayers:"Unknown",gamemode:"Unknown",difficulty:"Unknown",seed:"Unknown",software:"Unknown",version:"Unknown",error:null},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.intervalID)}},{key:"getData",value:function(){var e=this,t={id:this.props.auth.user.id};N.a.post("/api/servers/info",t).then((function(t){e.setState({name:t.data.data.name,online:t.data.data.online,address:t.data.data.address,port:t.data.data.port,onlinePlayers:t.data.data.onlinePlayers,maxPlayers:t.data.data.maxPlayers,gamemode:t.data.data.gamemode,difficulty:t.data.data.difficulty,seed:t.data.data.seed,software:t.data.data.software,version:t.data.data.version})})).catch((function(t){return e.setState({error:t.response.data.error})})),this.intervalID=setTimeout(this.getData.bind(this),5e3)}},{key:"render",value:function(){var e=this.props.auth.user;return null===this.state.error&&this.state.online?r.a.createElement("div",{className:"appDiv"},r.a.createElement("nav",{className:"navtop"},r.a.createElement("div",null,r.a.createElement("h1",null,"Bedrock Server Controls (v1.0-beta)"),r.a.createElement("button",{onClick:this.onProfileClick},r.a.createElement("i",{className:"fas fa-user-circle"}),e.username),r.a.createElement("button",{onClick:this.onLogoutClick},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),"Logout"))),r.a.createElement("div",{className:"headerCards"},r.a.createElement(M,{name:this.state.name})),r.a.createElement("div",{className:"cards"},r.a.createElement(z,{id:e.id,online:this.state.online}),r.a.createElement(J,{address:this.state.address,port:this.state.port}),r.a.createElement(X,{onlinePlayers:this.state.onlinePlayers,maxPlayers:this.state.maxPlayers}),r.a.createElement(q,{software:this.state.software,version:this.state.version}),r.a.createElement(F,{baseURL:"https://bedrockcontrols.sytes.net"}))):null!==this.state.error||this.state.online?r.a.createElement("div",{className:"appDiv"},r.a.createElement("nav",{className:"navtop"},r.a.createElement("div",null,r.a.createElement("h1",null,"Bedrock Server Controls (v1.0-beta)"),r.a.createElement("button",{onClick:this.onProfileClick},r.a.createElement("i",{className:"fas fa-user-circle"}),e.username),r.a.createElement("button",{onClick:this.onLogoutClick},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),"Logout"))),r.a.createElement("div",{className:"headerCards"},r.a.createElement("p",{style:{color:"red"}},"Error: ",this.state.error),r.a.createElement("p",{style:{color:"red"}},"Contact the server admin"))):r.a.createElement("div",{className:"appDiv"},r.a.createElement("nav",{className:"navtop"},r.a.createElement("div",null,r.a.createElement("h1",null,"Bedrock Server Controls (v1.0-beta)"),r.a.createElement("button",{onClick:this.onProfileClick},r.a.createElement("i",{className:"fas fa-user-circle"}),e.username),r.a.createElement("button",{onClick:this.onLogoutClick},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),"Logout"))),r.a.createElement("div",{className:"headerCards"},r.a.createElement(M,{name:this.state.name})),r.a.createElement("div",{className:"cards"},r.a.createElement(z,{id:e.id,online:this.state.online}),r.a.createElement(J,{address:this.state.address,port:this.state.port}),r.a.createElement(q,{software:this.state.software,version:this.state.version}),r.a.createElement(F,{baseURL:"http://3.128.29.141"})))}}]),a}(r.a.Component),Q=Object(p.b)((function(e){return{auth:e.auth,errors:e.errors}}),{logoutUser:R})(K);if(localStorage.jwtToken){var Y=localStorage.jwtToken;S(Y);var Z=j()(Y);k.dispatch(U(Z));var ee=Date.now()/1e3;Z.exp<ee&&(k.dispatch(R()),window.location.href="./login")}var te=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(p.a,{store:k},r.a.createElement(d.a,null,r.a.createElement("div",{className:"appDiv"},r.a.createElement(m.b,{exact:!0,path:"/",component:D}),r.a.createElement(m.b,{exact:!0,path:"/login",component:W}),r.a.createElement(m.b,{exact:!0,path:"/register",component:A}),r.a.createElement(m.d,null,r.a.createElement(I,{exact:!0,path:"/dashboard",component:Q})))))}}]),a}(r.a.Component),ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ae?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ne(t,e)}))}}()}},[[47,1,2]]]);
//# sourceMappingURL=main.49a77099.chunk.js.map